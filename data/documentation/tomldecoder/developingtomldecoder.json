{"abstract":[{"text":"Notes for TOMLDecoder mainateners.","type":"text"}],"hierarchy":{"paths":[["doc://TOMLDecoder/documentation/TOMLDecoder"]]},"identifier":{"interfaceLanguage":"swift","url":"doc://TOMLDecoder/documentation/TOMLDecoder/DevelopingTOMLDecoder"},"kind":"article","metadata":{"modules":[{"name":"TOMLDecoder"}],"role":"article","roleHeading":"Article","title":"Developing TOMLDecoder"},"primaryContentSections":[{"content":[{"anchor":"Writing-code","level":2,"text":"Writing code","type":"heading"},{"inlineContent":[{"text":"Use ","type":"text"},{"identifier":"https://github.com/nicklockwood/SwiftFormat/tree/main","isActive":true,"type":"reference"},{"text":",","type":"text"},{"text":" ","type":"text"},{"text":"ideally, the version specified in ","type":"text"},{"code":"Scripts/format.sh","type":"codeVoice"},{"text":" to format all code.","type":"text"},{"text":" ","type":"text"},{"text":"Patches containing unformatted code should not be accepted. We recommend","type":"text"},{"text":" ","type":"text"},{"text":"adding ","type":"text"},{"code":"swiftformat --lint .","type":"codeVoice"},{"text":" in git pre-commit hooks.","type":"text"}],"type":"paragraph"},{"anchor":"Testing","level":2,"text":"Testing","type":"heading"},{"inlineContent":[{"text":"Write tests with Swift’s Testing framework.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"Our unit tests includes","type":"text"},{"text":" ","type":"text"},{"text":"the ","type":"text"},{"identifier":"https://github.com/toml-lang/toml-test","isActive":true,"type":"reference"},{"text":" ","type":"text"},{"text":"from the TOML GitHub organization, systematically translated into Swift tests.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"Run tests with ","type":"text"},{"code":"swift test","type":"codeVoice"},{"text":", as well as ","type":"text"},{"code":"bazel test //...","type":"codeVoice"},{"text":".","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"Tests must pass on macOS, Ubuntu, and Windows for any changes to land.","type":"text"}],"type":"paragraph"},{"anchor":"Generating-code-and-tests","level":2,"text":"Generating code, and tests","type":"heading"},{"items":[{"content":[{"inlineContent":[{"text":"Parts of code is written using ","type":"text"},{"code":"gyb","type":"codeVoice"},{"text":". Use the script","type":"text"},{"text":" ","type":"text"},{"code":"Scripts/generate-code.sh","type":"codeVoice"},{"text":" to generate the code. The generated code is checked","type":"text"},{"text":" ","type":"text"},{"text":"into the repo. Look for header comments indicating generated code, and only","type":"text"},{"text":" ","type":"text"},{"text":"make changes in the corresponding ","type":"text"},{"code":".gyb","type":"codeVoice"},{"text":" files during development.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"A subset of tests are generated by directly copying fixtures for the official","type":"text"},{"text":" ","type":"text"},{"text":"test suite. This is done by a script ","type":"text"},{"code":"Scripts/generate-tests.py","type":"codeVoice"},{"text":".","type":"text"},{"text":" ","type":"text"},{"text":"The generated tests and fixtures are checked into the repo. The script","type":"text"},{"text":" ","type":"text"},{"text":"contains a SHA of the test suite repo from which the tests are copied. Update","type":"text"},{"text":" ","type":"text"},{"text":"the SHA to get potential newer tests.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"The script ","type":"text"},{"code":"Scripts/test-generate.sh","type":"codeVoice"},{"text":" should be run to verify that the","type":"text"},{"text":" ","type":"text"},{"text":"generated code and tests are up to date. It exists with a non-zero exit code","type":"text"},{"text":" ","type":"text"},{"text":"if new code is generated.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Generated source files should have ","type":"text"},{"code":".Generated.swift","type":"codeVoice"},{"text":" suffix in the filename.","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"anchor":"Benchmarking","level":2,"text":"Benchmarking","type":"heading"},{"inlineContent":[{"text":"Use ","type":"text"},{"code":"Scirpts/benchmark.sh baseline-SHA new-SHA","type":"codeVoice"},{"text":" to compare performance between","type":"text"},{"text":" ","type":"text"},{"text":"two commits.","type":"text"}],"type":"paragraph"},{"anchor":"Releasing","level":2,"text":"Releasing","type":"heading"},{"items":[{"content":[{"inlineContent":[{"text":"Pick a new version number accoring to ","type":"text"},{"identifier":"https://semver.org/","isActive":true,"type":"reference"},{"text":".","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Places referencing the latest version needs to be updated:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"text":"Instructions for adding TOMLDocoder as a SwiftPM dependency in Getting","type":"text"},{"text":" ","type":"text"},{"text":"Started.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"MODULE.bazel","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Potentially other places. Search for the old version number in the repo.","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"text":"In CHANGLOG.md, create section for the new release. Move any content under","type":"text"},{"text":" ","type":"text"},{"code":"Development","type":"codeVoice"},{"text":" to the new section. Note any changes that isn’t in the existing","type":"text"},{"text":" ","type":"text"},{"text":"notes.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Check in the above changes and land the commit to the ","type":"text"},{"code":"main","type":"codeVoice"},{"text":" branch.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Tag the commit on ","type":"text"},{"code":"main","type":"codeVoice"},{"text":" created from the previous step. The tag should be the","type":"text"},{"text":" ","type":"text"},{"text":"literal version number (No ","type":"text"},{"code":"v","type":"codeVoice"},{"text":" prefix). Push the tag to GitHub.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Create a draft release referencing the tag on GitHub.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Download all source archives inluded in the release in a empty directory. Run","type":"text"},{"text":" ","type":"text"},{"code":"shasum -a 256 *","type":"codeVoice"},{"text":". Include the output as a code block in the release notes.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Publish the release on GitHub.","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"}],"kind":"content"}],"references":{"doc://TOMLDecoder/documentation/TOMLDecoder":{"abstract":[{"text":"Swift library for decoding TOML (Tom’s Obvious Minimal Language).","type":"text"},{"text":" ","type":"text"},{"code":"TOMLDecoder","type":"codeVoice"},{"text":" enables working with TOML documents with Swift’s Codable types.","type":"text"},{"text":" ","type":"text"},{"text":"And it provides fast, type-safe TOML parsing, and deserialization.","type":"text"},{"text":" ","type":"text"},{"code":"TOMLDecoder","type":"codeVoice"},{"text":" implements the TOML 1.0 spec.","type":"text"}],"identifier":"doc://TOMLDecoder/documentation/TOMLDecoder","kind":"symbol","role":"collection","title":"TOMLDecoder","type":"topic","url":"/documentation/tomldecoder"},"https://github.com/nicklockwood/SwiftFormat/tree/main":{"identifier":"https://github.com/nicklockwood/SwiftFormat/tree/main","title":"swiftformat","titleInlineContent":[{"text":"swiftformat","type":"text"}],"type":"link","url":"https://github.com/nicklockwood/SwiftFormat/tree/main"},"https://github.com/toml-lang/toml-test":{"identifier":"https://github.com/toml-lang/toml-test","title":"official suite","titleInlineContent":[{"text":"official suite","type":"text"}],"type":"link","url":"https://github.com/toml-lang/toml-test"},"https://semver.org/":{"identifier":"https://semver.org/","title":"Semantic Versioning","titleInlineContent":[{"text":"Semantic Versioning","type":"text"}],"type":"link","url":"https://semver.org/"}},"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["/documentation/tomldecoder/developingtomldecoder"],"traits":[{"interfaceLanguage":"swift"}]}]}
