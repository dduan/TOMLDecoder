# How to Decode TOML

Learn how to convert TOML into your Codable types.

## Overview

Swift's standard library defines the `Encodable`,
and `Decodable` protocol.
Combined, they form the superset, `Codable` protocol.
If your types conforms to `Decodable`, or `Codable`,
`TOMLDecoder` can create instances of your types from TOML data.

The API for doing so is very similar to the `JSONDecoder` API from `Foundation`.

```swift
struct Config: Codable {
    let title: String
    ...
}
let toml: String = """
title = "TOML Example"
...
""""

var decoder = TOMLDecoder()
decoder.strategy = ... // optionally customize decoder behavior
try TOMLDecoder().decode(Config.self, from: toml)

print(config.title) // "TOML Example"
```

In order to decode TOML into instances of your type,
TOMLDecoder first parses the data into a strict set of
structural, or leaf types (<doc:DeserializingTOML>).

But unlike the parsing phase,
the decoding phase tries to accommodate different types in your `Decodable`.
For example,
a integer is parsed as an `Int64`,
but if you need a `UInt` in your `Decodable` type,
TOMLDecoder will attempt the conversion
instead of rejecting the request with an error.

Like other options,
this lenient, automatic conversion can be turned off
by setting the ``/TOMLDecoder/TOMLDecoder/isLenient`` property.


## Decoding strategies

Similar to Foundation's `JSONDecoder`,
you can change ``/TOMLDecoder/TOMLDecoder``'s behavior by specifying
different decoding strategies.

### Table key strategies

To change how table keys maps into your property names,
set ``/TOMLDecoder/TOMLDecoder/Strategy/key``.
for example,
``/TOMLDecoder/TOMLDecoder/Strategy/Key/convertFromSnakeCase``
causes a key `ice_cream` in TOML
to map to the property `iceCream` on your `Decodable` type.

### Offset date-time strategies

To change the way a TOML offset date-time is interpreted,
set ``/TOMLDecoder/TOMLDecoder/Strategy/offsetDateTime``.

This option has no effect if the decoded property is a  ``/TOMLDecoder/OffsetDateTime``.

## Supported type conversions

When `/TOMLDecoder/TOMLDecoder/isLenient` is `true` (the default),
TOMLDecoder will attempt to convert the value from the type
generated by the parser
to a related type from Swift's standard library,
or Foundation.
You may use the original type generated by the parser,
or one of the other related types in your `Decodable` to
represent the TOML value.
The rest of this section is a list of all the supported types.

### TOML Integer

TOML Integers are parsed as `Int64`.

TOMLDecoder will attempt to convert it to the following types,
if the original number can be represented by the type.

* `Int`
* `Int32`
* `Int16`
* `Int8`
* `UInt`
* `UInt64`
* `Int32`
* `Int16`
* `Int8`

### TOML Float

TOML floating number are parsed as `Double`.
TOMLDecoder will attempt to convert it to a `Float`.

You may also interpret a float as a time interval,
and represent it as a `Foundation.Date`.
See ``/TOMLDecoder/TOMLDecoder/Strategy/OffsetDateTime``.

### TOML String

TOML String can only be represented by `String`.

### TOML Offset Date-Time

TOML offset date-times are parsed as ``/TOMLDecoder/OffsetDateTime``s.

TOMLDecoder will attempt to convert it to

* `Foundation.Date`
* `Double` / `TimeInterval`
* ``/TOMLDecoder/LocalDateTime``
* ``/TOMLDecoder/LocalDate``
* ``/TOMLDecoder/LocalTime``

When converting to local date/time types,
the timezone offset is discarded.

See ``/TOMLDecoder/TOMLDecoder/Strategy/OffsetDateTime``
to learn about conversion to `Date` or `Double`.

### TOML Local Date-Time

Parsed as ``/TOMLDecoder/LocalDateTime``.

TOMLDecoder will attempt to convert it to

* `Foundation.DateComponents`
* ``/TOMLDecoder/LocalDate``
* ``/TOMLDecoder/LocalTime``

### TOML Local Date

Parsed as ``/TOMLDecoder/LocalDate``.

TOMLDecoder will attempt to convert it to

* `Foundation.DateComponents`

### TOML Local Time

Parsed as ``/TOMLDecoder/LocalTime``.

TOMLDecoder will attempt to convert it to

* `Foundation.DateComponents`

### TOML Table

Parsed as ``/TOMLDecoder/TOMLTable``.

TOMLDecoder will attempt to convert it to a `Dictionary<String, Any>`.


### TOML Array

Parsed as ``/TOMLDecoder/TOMLArray``.

TOMLDecoder will attempt to convert it to a `Array<Any>`.
